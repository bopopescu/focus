{% extends "base.html" %}
{% load auth %}
{% load util %}
{% load i18n %}

{% block extrahead %}
{% endblock %}

{% block submenu %}
{% endblock %}


{% block maincontent %}

<div class="portlet x7">
    <div class="portlet-header"><h4>{{ title }}</h4></div>

    <div class="portlet-content">

        <table>

            <tr>
                <td width="100px">{% trans "Name" %}</td>
                <td>{{ customer.full_name }}</td>
            </tr>

            <tr>
                <td>{% trans "E-mail" %}</td>
                <td>{{ customer.email }}</td>
            </tr>

            <tr>
                <td>{% trans "Website" %}</td>
                <td>
                    {{ customer.website|urlize|url_target_blank|safe }}
                </td>
            </tr>
            <tr>
                <td>{% trans "Address" %}</td>
                <td>
                    {% if customer.address %}
                        {{ customer.address }}, {{ customer.zip }} {{ customer.city }}
                        {% else %}{% if customer.address %}
                            {{ customer.address }} {{ customer.zip }} {{ customer.city }}
                        {% endif %}{% endif %}
                </td>
            </tr>
            <tr>
                <td>{% trans "Alternative address" %}</td>
                <td>{{ customer.alternative_address }}</td>
            </tr>
        </table>


    </div>
</div>

<div class="portlet x5">

    <div class="portlet-header"><h4>{% trans "Choices" %}</h4></div>

    <div class="portlet-content">

        {% if not customer.trashed %}
        {% require_permission EDIT customer %}
        <div class="tool editChoice">
            <a href="{% url app.customers.views.edit customer.id %}">{% trans "Edit customer" %}</a>
        </div>
        {% end_require %}
        {% endif %}

        {% require_permission DELETE customer %}

        {% if customer.trashed %}
            <div class="tool deleteChoice">
                <a href="{% url app.customers.views.recover customer.id %}">{% trans "Recover customer" %}</a>
            </div>

        {% endif %}{% if not customer.trashed %}
        <div class="tool deleteChoice">
            <a href="{% url app.customers.views.trash customer.id %}">{% trans "Delete customer" %}</a>
        </div>
    {% endif %}


        {% end_require %}

    </div>
</div>

<div class="portlet x5">
    <div class="portlet-header"><h4>{% trans "Projects and orders" %}</h4></div>

    <div class="portlet-content">


        <table>

            <tr>
                <th>Prosjekt</th>
                <th>Ordrer</th>
            </tr>

            {% for project in customer.projects.all %}
                <tr>
                    <td><a href="{% url app.projects.views.view project.id %}">{{ project.project_name }}</a></td>
                    <td></td>
                </tr>

                {% for order in project.orders.all %}
                    <tr>
                        <td></td>
                        <td><a href="{% url app.orders.views.view order.id %}">{{ order.order_name }}</a></td>
                    </tr>
                {% endfor %}
            {% endfor %}
        </table>

    </div>
</div>



{% endblock %}	