{% extends "tickets/base.html" %}
{% load auth %}
{% load i18n %}
{% load tickets_includetags %}


{% block content %}


    <script src="{{ STATIC_URL }}js/quicksearch.js"></script>


    <h1>{{ title }}</h1>
    {% tickets_type_filter request %}

    <br><br>

    <ul class="tickets">

        <li class="ticket-header">
            <ul>
                <li class="ticket-data-priority" style="width: 10px;"></li>
                <li class="ticket-data-activity" style="width:35%;">{% trans "Title" %}</li>
                <li class="ticket-data-activity">{% trans "Assigned" %}</li>
                <li class="ticket-data-activity">{% trans "Priority" %}</li>
                <li class="ticket-data-activity">{% trans "Status" %}</li>
                <li class="ticket-data-activity">{% trans "Date created" %}</li>
            </ul>
        </li>

        {% for ticket in tickets %}

            <li class="ticket-data">
                <div class="ticket-overview">
                    <ul>
                        <li class="ticket-data-priority" style="width: 10px;">
                            {% if ticket.mark_as_unread_for_current_user %}
                                <span style="color:red; font-size: 20px;"> * </span>
                            {% endif %}
                        </li>

                        <li class="ticket-data-ticket" style="width:35%;">

                            <a href="#" class="ticket-open-details">{{ ticket.title }}</a>
                            <p>{{ ticket.description|truncatewords:15 }}</p>

                        </li>
                        <li class="ticket-data-priority">
                            <strong>{{ ticket.creator }}</strong>

                        </li>
                        <li class="ticket-data-priority">
                            <span class="tag {{ ticket.get_priority.color }}">{{ ticket.get_priority.name }}</span>
                        </li>
                        <li class="ticket-data-priority">
                            <span class="tag {{ ticket.get_status.color }}">{{ ticket.get_status.name }}</span>
                        </li>
                        <li class="ticket-data-priority">
                            {{ ticket.date_created }}
                        </li>
                    </ul>
                </div>
                <div class="ticket-details">
                    <h4>{{ ticket.title }}</h4>
                    <dl>
                        <dt>Opened:</dt>
                        <dd><strong>{{ ticket.date_created }}</strong></dd>
                        <dt>Last updated:</dt>
                        <dd><strong>{{ ticket.date_edited }}</strong></dd>
                        <dt>Milestone:</dt>
                        <dd><strong>N/A</strong></dd>
                        <dt class="clear">Reported by:</dt>
                        <dd><strong>{{ ticket.creator }}</strong></dd>
                        <dt>Assigned to:</dt>
                        <dd><strong>{{ ticket.assigned_to }}</strong></dd>
                        <dt>Order:</dt>
                        <dd><strong>{{ ticket.order }}</strong></dd>
                    </dl>
                    <h5>Description</h5>

                    <p>{{ ticket.description }}</p>
                    <ul class="ticket-details-actions">
                        <li><a href="{{ ticket.get_update_url }}" class="button gray">Update ticket</a></li>
                        <li><a href="#" class="button red">Close ticket</a></li>
                    </ul>
                </div>
                <!-- /Ticket Details -->
            </li>
        {% endfor %}

    </ul>



{% endblock %}